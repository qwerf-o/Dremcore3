<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/scripts/main.js"></script>
    <link rel="stylesheet" href="/styles/main.css">
    <title>DREAMCORE</title>
</head>
<body>
    <img class="background-overlay" src="/assets/img/backgroundOverlay.png"/>
    <div class="entrance">
        <div class="clouds-container">
            <div class="cloud cloud-1" data-speed="0.03"></div>
            <div class="cloud cloud-2" data-speed="0.05"></div>
            <div class="cloud cloud-3" data-speed="0.02"></div>
            <div class="cloud cloud-4" data-speed="0.04"></div>
        </div>
        <h1>dreamcore</h1>
    </div>
    <div class="section">
        <div class="grid">
            <div class="left">
                <img class="red-line-decoration" src="/assets/img/red-line.png"/>
                <div class="warning-placeholder" id="warning-placeholder"></div>
                <div class="info-placeholder" id="info-placeholder"></div>
            </div>
            <a class="lyrics">
                Here's a little song I wrote<br>
                You might want to sing it note for note<br>
                Don't worry, be happy<br>
                In every life we have some trouble<br>
                But when you worry, you make it double<br>
                Don't worry, be happy<br>
                Don't worry, be happy now<br>
                <br>
                (Ooh-ooh-ooh, ooh-ooh-ooh)<br>
                Don't worry, be happy (ooh-ooh-ooh, ooh-ooh)<br>
                Don't worry, be happy<br>
                (Ooh-ooh-ooh, ooh-ooh-ooh)<br>
                Don't worry, be happy (ooh-ooh-ooh, ooh-ooh)<br>
                Don't worry, be happy<br>
                <br>
                Ain't got no place to lay your head<br>
                Somebody came and took your bed<br>
                Don't worry, be happy<br>
                The landlord say your rent is late<br>
                He may have to litigate<br>
                But don't worry, be happy<br>
                Look at me, I'm happy<br>
                <br>
                (Ooh-ooh-ooh, ooh-ooh-ooh)<br>
                Don't worry, be happy (ooh-ooh-ooh, ooh-ooh)<br>
                Can I give you my phone number<br>
                When you worry, call me, I'll make you happy<br>
                (Ooh-ooh-ooh, ooh-ooh-ooh)<br>
                Don't worry, be happy (ooh-ooh-ooh, ooh-ooh)<br>
                <br>
                Ain't got no cash, ain't got no style<br>
                Ain't got no gal to make you smile<br>
                But don't worry, be happy<br>
                'Cause when you worry, your face will frown<br>
                And that will bring everybody down<br>
                So don't worry, be happy<br>
                Don't worry, be happy now<br>
            </a>
        </div>
    </div>
    <div class="section2">
        <div class="char-editor">
            <div class="titlebar">
                Создай свой образ
                <img class="controls" src="/assets/img/controls.png"/>
            </div>
            <div class="body">
                <div class="elements">
                    <div class="element-container">
                        <img class="element" src="/assets/img/elements/1.png"/>
                    </div>
                    <div class="element-container">
                        <img class="element" src="/assets/img/elements/2.png"/>
                    </div>
                    <div class="element-container">
                        <img class="element" src="/assets/img/elements/3.png"/>
                    </div>
                    <div class="element-container">
                        <img class="element" src="/assets/img/elements/4.png"/>
                    </div>
                    <div class="element-container">
                        <img class="element" src="/assets/img/elements/5.png"/>
                    </div>
                    <div class="element-container">
                        <img class="element" src="/assets/img/elements/6.png"/>
                    </div>
                    <div class="element-clear" onclick="clearElements()">
                        Стереть
                    </div>
                </div>
                <div class="background-picker">
                    <div class="picker" style="background-color: #FFFF64"></div>
                    <div class="picker" style="background-color: #000000"></div>
                    <div class="picker" style="background-color: #82EAA3"></div>
                    <div class="picker" style="background-color: #D90000"></div>
                    <div class="picker" style="background-color: #AB73F3"></div>
                    <div class="picker" style="background-color: #CE00B6"></div>
                    <div class="picker" style="background-color: #EAB0D9"></div>
                    <div class="picker" style="background-color: #0167CE"></div>
                    <div class="picker" style="background-color: #D9D9D9"></div>
                </div>
                <div class="canva">

                </div>
            </div>
        </div>
    </div>
    <div class="credits">
        <img src="/assets/img/credits1.png" alt="Bubble 1">
        <img src="/assets/img/credits2.png" alt="Bubble 2">
        <img src="/assets/img/credits3.png" alt="Bubble 3">
    </div>
    <img class="balloon" src="/assets/img/baloon.png" alt="Balloon">
    <div class="footer">
        <img src="/assets/img/footerBG.png" class="footer-bg">
        <img src="/assets/img/footerFG.png" class="footer-fg">
        <img src="/assets/img/schoolLogo.png" class="school-logo">
        <div class="griby">
            <img src="/assets/img/footerGRIB.png" class="grib1 grib">
            <img src="/assets/img/footerGRIB.png" class="grib2 grib">
            <img src="/assets/img/footerGRIB.png" class="grib3 grib">
            <img src="/assets/img/footerGRIB.png" class="grib4 grib">
        </div>
    </div>
    <script>
        // Disable browser's automatic scroll restoration
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Force scroll to top on page load
            window.scrollTo(0, 0);
            
            const clouds = document.querySelectorAll('.cloud');
            let lastMouseX = 50, lastMouseY = 50;
            let ticking = false;
            let cloudData = [];
            let time = 0;
            
            // Initialize cloud data after a small delay to ensure scroll position is set
            setTimeout(() => {
                // Cache cloud data to avoid DOM reads during animation
                clouds.forEach((cloud, index) => {
                    const randomRotation = Math.random() * 10 - 5;
                    cloud.setAttribute('data-rotation', randomRotation);
                    cloudData.push({
                        element: cloud,
                        speed: parseFloat(cloud.getAttribute('data-speed')),
                        baseRotation: randomRotation,
                        // Add unique properties for desynchronization
                        delay: 0.5 + Math.random() * 0.7, // Random response delay factor (0.5-1.2)
                        phaseX: Math.random() * Math.PI * 2, // Random phase for X autonomous movement
                        phaseY: Math.random() * Math.PI * 2, // Random phase for Y autonomous movement
                        autonomousAmpX: 5 + Math.random() * 15, // Amplitude of autonomous X movement
                        autonomousAmpY: 5 + Math.random() * 15, // Amplitude of autonomous Y movement
                        // Different frequency for each cloud
                        frequencyX: 0.0003 + (index * 0.0001), 
                        frequencyY: 0.0005 + (index * 0.0001),
                        // Store current position for smooth interpolation
                        currentX: 0,
                        currentY: 0,
                        currentRotation: randomRotation
                    });
                });
                
                // Start animation loop
                function animateLoop() {
                    time++;
                    updateClouds();
                    requestAnimationFrame(animateLoop);
                }
                
                // Start the animation loop
                animateLoop();
            }, 10);
            
            // Function to update cloud positions
            function updateClouds() {
                // Calculate movement for each cloud
                cloudData.forEach(data => {
                    // Calculate mouse-driven movement
                    const targetX = (50 - lastMouseX) * data.speed;
                    const targetY = (50 - lastMouseY) * data.speed;
                    
                    // Calculate autonomous movement based on time and unique phases
                    const autonomousX = Math.sin(time * data.frequencyX + data.phaseX) * data.autonomousAmpX;
                    const autonomousY = Math.cos(time * data.frequencyY + data.phaseY) * data.autonomousAmpY;
                    
                    // Calculate rotation based on mouse position with slight randomness
                    const baseRotationAdjustment = ((lastMouseX - 50) * 0.03);
                    const targetRotation = data.baseRotation + baseRotationAdjustment + 
                                          Math.sin(time * 0.001 + data.phaseX) * 2;
                    
                    // Smooth interpolation for more natural movement
                    data.currentX += (targetX + autonomousX - data.currentX) / data.delay;
                    data.currentY += (targetY + autonomousY - data.currentY) / data.delay;
                    data.currentRotation += (targetRotation - data.currentRotation) / (data.delay * 1.5);
                    
                    // Apply transform
                    data.element.style.transform = `translate3d(${data.currentX}px, ${data.currentY}px, 0) rotate(${data.currentRotation}deg)`;
                });
                
                ticking = false;
            }
            
            // Throttled event handler using requestAnimationFrame
            document.addEventListener('mousemove', function(e) {
                // Calculate mouse position as percentage
                lastMouseX = (e.clientX / window.innerWidth) * 100;
                lastMouseY = (e.clientY / window.innerHeight) * 100;
                
                if (!ticking) {
                    requestAnimationFrame(() => {
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        });
    </script>
</body>
</html>